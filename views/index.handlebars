<!-- Dropdown Structure -->
<ul id="dropdown1" class="dropdown-content">
    <li><a href="/search">Search Movies</a></li>
    <li><a href="/logout">Logout</a></li>

</ul>
<nav>
    <div class="nav-wrapper">
        <a href="#!" class="brand-logo">QuaranScreen</a>
        <ul class="right">

            <!-- Dropdown Trigger -->
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown1">Options</a></li>
        </ul>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col s12 xl6">
            <h3>My WatchList</h3>
            <div id="my-watchlist">
                <ul>

                    {{#each userMovieList}}
                    {{#unless this.is_watched}}
                    <pre> {{this.movietitle}}
					</pre>

                    {{/unless}}
                    {{/each}}
                </ul>

            </div>
        </div>
        <div class="col s12 xl6">
            <h3>Already Watched</h3>
            <div id="already-watched">
                <ul>
                    {{#each userMovieList}}
                    {{#if is_watched}}
                 
                    <pre> {{this.movietitle}}
					</pre> 
                    {{/if}}
                    {{/each}}
                </ul>

            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $(".dropdown-trigger").dropdown({
            coverTrigger: false
        });
    });
    $(() => {
        $(".change-isWatched").on("click", function () {
            const id = $(this).data("id");
            const newisWatched = $(this).data("newisWatched");

            const newisWatchedState = { value: newisWatched };

            $.ajax(`/api/watchlistitem/${id}/is_watched`, {
                type: "PUT",

                data: JSON.stringify(newisWatchedState),

                contentType: "application/json; charset=UTF-8"
            }).then(() => {
                location.reload();
            });
        });
    });

</script>

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<!--External JS-->
<script src="public/js/movielist.js"></script>